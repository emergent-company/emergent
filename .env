# =============================================================================
# WORKSPACE CONFIGURATION
# =============================================================================
#
# This file contains workspace-level variables only.
# Service-specific variables are loaded from Infisical via .env.local
#
# Infrastructure:
#   - PostgreSQL: managed via emergent-infra/postgres
#   - Zitadel: managed via emergent-infra/zitadel
#
# =============================================================================

# Workspace settings
COMPOSE_PROJECT_NAME=emergent
NAMESPACE=dev

# Admin app ports
ADMIN_PORT=5200

# Server ports (Go server)
# SERVER_PORT - Read by Go server config (internal/config/config.go)
# GO_SERVER_PORT - Read by Vite for /api/v2 proxy (vite.config.ts)
SERVER_PORT=5300
GO_SERVER_PORT=5300

# Website app port
WEBSITE_PORT=4002

# E2E testing (optional)
E2E_BASE_URL=http://localhost:5200
E2E_DEBUG_CHAT=1

# LLM Debug - set to true to log full prompts and responses
LLM_DEBUG=true

# LLM Call Dumping for debugging extraction jobs
LLM_DUMP_ENABLED=true
LLM_DUMP_DIR=logs/llm-dumps

# Langfuse Observability
LANGFUSE_ENABLED=true
LANGFUSE_HOST=https://langfuse.dev.emergent-company.ai
LANGFUSE_PUBLIC_KEY=pk-lf-a8a9575fc785de9ccff16ef3dc7965d8
LANGFUSE_SECRET_KEY=sk-lf-4793a6ae841d08709dc6fd455c33782c6b47a0d681d9243d76cbbdd6f40a917c

EXTRACTION_PIPELINE_MODE=langgraph
# OpenTelemetry Tracing Configuration
OTEL_ENABLED=false
OTEL_SERVICE_NAME=emergent-server
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SAMPLING_RATE=1.0

SIGNOZ_URL=https://signoz.dev.emergent-company.ai

# Kreuzberg Document Extraction Service
KREUZBERG_ENABLED=true
KREUZBERG_SERVICE_URL=http://[::1]:8000
KREUZBERG_SERVICE_TIMEOUT=300000

# Whisper Audio Transcription Service
# Uses onerahmet/openai-whisper-asr-webservice (port 9876 on host)
WHISPER_ENABLED=true
WHISPER_SERVICE_URL=http://[::1]:9876
WHISPER_MODEL=base
WHISPER_LANGUAGE=pl
WHISPER_MAX_FILE_SIZE_MB=500
WHISPER_PORT=9876
# 7200000ms = 2 hours - sufficient for ~2h podcast episode at ~1x realtime on CPU
WHISPER_SERVICE_TIMEOUT=7200000

# MinIO Storage Configuration
STORAGE_PROVIDER=minio
STORAGE_ENDPOINT=http://[::1]:9000
STORAGE_ACCESS_KEY=minio
STORAGE_SECRET_KEY=miniosecret
STORAGE_BUCKET_DOCUMENTS=documents
STORAGE_BUCKET_TEMP=document-temp
STORAGE_REGION=us-east-1

# Document Parsing Worker
DOCUMENT_PARSING_WORKER_ENABLED=true
DOCUMENT_PARSING_WORKER_POLL_INTERVAL_MS=5000
DOCUMENT_PARSING_WORKER_BATCH_SIZE=5

# Google Cloud / Vertex AI Configuration
GCP_PROJECT_ID=spec-server-dev
VERTEX_AI_LOCATION=global
VERTEX_LOCATION=global
